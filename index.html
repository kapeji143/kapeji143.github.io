<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Email Form</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/styles.css">
</head>

<body>

<div class="email-container">
    <h2>Send Email</h2>

    <div class="form-group">
        <label>To</label>
        <input type="email" id="to" placeholder="kay@example.com" required>
    </div>

    <div class="form-group">
        <label>Subject</label>
        <input type="text" id="subject" placeholder="Email subject" required>
    </div>

    <div class="form-group">
        <label>Message</label>
        <textarea id="message" placeholder="Type your message here..." required></textarea>
    </div>

    <button id="sendBtn" type="button" onclick="sendEmail()">Send</button>
</div>

<script>
async function sendEmail() {
    const to = document.getElementById("to").value.trim();
    const subject = document.getElementById("subject").value.trim();
    const message = document.getElementById("message").value.trim();
    const button = document.getElementById("sendBtn");

    if (!to || !subject || !message) {
        alert("Please fill in all fields ❌");
        return;
    }

    button.disabled = true;
    button.innerText = "Sending...";

    try {
        const response = await fetch(
            "https://kaypearl.app.n8n.cloud/webhook/send-message",
            {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ to, subject, message })
            }
        );

        if (response.ok) {
            alert("Email sent successfully ✅");
            document.getElementById("to").value = "";
            document.getElementById("subject").value = "";
            document.getElementById("message").value = "";
        } else {
            alert("Failed to send email ❌");
        }
    } catch (error) {
        console.error(error);
        alert("Error connecting to server ❌");
    }

    button.disabled = false;
    button.innerText = "Send";
}
</script>

</body>

</html>
